plugins {
    id 'com.android.library'
    id 'kotlin-android'
    id 'maven-publish'
    id 'kotlinx-serialization'
}

android {
    compileSdk 32

    defaultConfig {
        minSdk 24
        targetSdk 32

    }
    buildTypes {
        release {
            minifyEnabled false
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    kotlinOptions {
        jvmTarget = '1.8'
    }
}

//val sourcesJar by tasks.creating(Jar::class) {
//    archiveClassifier.set("sources")
//    from(project.android.sourceSets.getByName("main").java.srcDirs)
//}

afterEvaluate {
    publishing {
        publications {
            // Creates a Maven publication called "release".
            release(MavenPublication) {
                // Applies the component for the release build variant.
                from components.release

                // You can then customize attributes of the publication as shown below.
                groupId = 'com.simpleapps'
                artifactId = 'pdd'
                version = '0.1.3'
            }
        }
    }
}

//publishing {
////        repositories {
////            maven {
////                val publishUser: String? by project
////                val publishPassword: String? by project
////                url = uri("http://jfrog.idc.unabank.com/artifactory/libs-release-local/")
////                credentials {
////                    username = publishUser
////                    password = publishPassword
////                }
////                isAllowInsecureProtocol = true
////            }
////        }
//    publications {
//            create("release", MavenPublication::class.java) {
//                // Applies the component for the release build variant.
////                from(components.getByName("release"))
//                from(components.java)
//                groupId = "com.simpleapps.pdd"
//                version =  "0.1.3"
//                artifact(sourcesJar)
//            }
//
//    }
//}


dependencies {

    implementation("androidx.core:core-ktx:1.7.0")
    implementation("androidx.appcompat:appcompat:1.5.1")
    implementation("com.google.android.material:material:1.7.0")

    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:1.4.0")
    implementation("androidx.startup:startup-runtime:1.2.0-alpha01")
}